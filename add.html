<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Add Item</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #f5f5f5;
    margin: 0;
    padding: 20px;
  }

  h1 {
    text-align: center;
    margin-bottom: 20px;
    color: #333;
  }

  #addItemFormContainer {
    max-width: 500px;
    margin: 0 auto;
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    padding: 20px;
    margin-bottom: 20px;
  }

  #addItemFormContainer h2 {
    margin-top: 0;
    margin-bottom: 20px;
    color: #333;
    text-align: center;
  }

  #addItemForm label {
    display: block;
    margin-bottom: 10px;
    color: #333;
  }

  #addItemForm input[type="text"],
  #addItemForm input[type="number"],
  #addItemForm textarea {
    width: 100%;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 4px;
    margin-bottom: 10px;
    box-sizing: border-box;
  }

  #addItemForm button {
    background-color: #007bff;
    color: #fff;
    border: none;
    border-radius: 4px;
    padding: 10px 20px;
    cursor: pointer;
    transition: background-color 0.3s;
    width: 100%;
  }

  #addItemForm button:hover {
    background-color: #0056b3;
  }

  #itemsListContainer {
    max-width: 800px;
    margin: 0 auto;
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    padding: 20px;
  }

  #itemsListContainer h2 {
    margin-top: 0;
    margin-bottom: 20px;
    color: #333;
    text-align: center;
  }

  .item {
    padding: 10px;
    border-bottom: 1px solid #ccc;
  }

  .item:last-child {
    border-bottom: none;
  }

  .item-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .item-info h3 {
    margin: 0;
    color: #333;
  }

  .item-info p {
    margin: 0;
    color: #666;
  }

  .remove-btn {
    background-color: #dc3545;
    color: #fff;
    border: none;
    border-radius: 4px;
    padding: 5px 10px;
    cursor: pointer;
    transition: background-color 0.3s;
  }

  .remove-btn:hover {
    background-color: #c82333;
  }
</style>
</head>
<body>

<h1>Add New Item</h1>

<div id="addItemFormContainer">
  <h2>Add New Item</h2>
  <form id="addItemForm">
    <label for="name">Name:</label>
    <input type="text" id="name" name="name" required><br>
    <label for="description">Description:</label>
    <textarea id="description" name="description" required></textarea><br>
    <label for="price">Price:</label>
    <input type="number" id="price" name="price" step="0.01" required><br>
    <label for="image">Image URL:</label>
    <input type="text" id="image" name="image" required><br><br>
    <button type="submit">Add Item</button>
  </form>
</div>

<div id="itemsListContainer">
  <h2>Current Items</h2>
  <div id="itemsList"></div>
</div>

<script>
  // Function to render items list
  function renderItemsList(items) {
    const itemsList = document.getElementById('itemsList');
    itemsList.innerHTML = '';

    items.forEach((item, index) => {
      const itemDiv = document.createElement('div');
      itemDiv.classList.add('item');
      itemDiv.innerHTML = `
        <div class="item-info">
          <div>
            <h3>${item.name}</h3>
            <p>${item.description}</p>
            <p>$${item.price.toFixed(2)}</p>
          </div>
          <button class="remove-btn" onclick="removeItem(${index})">Remove</button>
        </div>
      `;
      itemsList.appendChild(itemDiv);
    });
  }

  // Function to remove an item from the list
  function removeItem(index) {
    fetch('items.json')
      .then(response => response.json())
      .then(data => {
        data.splice(index, 1);
        const jsonData = JSON.stringify(data, null, 2);
        const blob = new Blob([jsonData], { type: 'application/json' });
        const url = window.URL.createObjectURL(blob);

        const a = document.createElement('a');
        a.href = url;
        a.download = 'items.json';
        document.body.appendChild(a);
        a.click();
        window.URL.revokeObjectURL(url);
      })
      .then(() => {
        alert('Item removed successfully!');
      })
      .catch(error => {
        console.error('Error:', error);
        alert('An error occurred while removing the item. Please try again.');
      });
  }

  // Fetch items from JSON file and render items list
  fetch('items.json')
    .then(response => response.json())
    .then(data => {
      renderItemsList(data);
    });

  // Form submission to add new item
  document.getElementById('addItemForm').addEventListener('submit', function(event) {
    event.preventDefault();
    const formData = new FormData(this);
    const newItem = {};
    formData.forEach((value, key) => {
      newItem[key] = value;
    });

    fetch('items.json')
      .then(response => response.json())
      .then(data => {
        data.push(newItem);
        const jsonData = JSON.stringify(data, null, 2);
        const blob = new Blob([jsonData], { type: 'application/json' });
        const url = window.URL.createObjectURL(blob);

        const a = document.createElement('a');
        a.href = url;
        a.download = 'items.json';
        document.body.appendChild(a);
        a.click();
        window.URL.revokeObjectURL(url);
      })
      .then(() => {
        alert('Item added successfully!');
        document.getElementById('addItemForm').reset();
        // Fetch items again and re-render the list
        fetch('items.json')
          .then(response => response.json())
          .then(data => {
            renderItemsList(data);
          });
      })
      .catch(error => {
        console.error('Error:', error);
        alert('An error occurred while adding the item. Please try again.');
      });
  });
</script>

</body>
</html>
